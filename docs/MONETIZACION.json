{
  "metadata": {
    "title": "Estrategias de Monetización para Coreboard",
    "path": "docs/MONETIZACION.md",
    "category": "business",
    "tags": [
      "business"
    ],
    "lastUpdated": "2025-11-15",
    "fileName": "MONETIZACION"
  },
  "content": "# Estrategias de Monetización para Coreboard\r\n\r\n## Situación Actual\r\n\r\nCoreboard actualmente es **gratuito** para las organizaciones. No existe:\r\n- Sistema de suscripciones/planes\r\n- Comisiones que Coreboard cobre a los usuarios\r\n- Modelo de facturación\r\n\r\n## Estrategias Propuestas\r\n\r\n### 1. Modelo de Suscripción por Niveles (SaaS Tradicional)\r\n\r\n**Ventajas:**\r\n- Ingresos recurrentes predecibles\r\n- Fácil de implementar y gestionar\r\n- Escalable según el tamaño del negocio\r\n\r\n**Planes Sugeridos:**\r\n\r\n#### Plan Básico - $29/mes\r\n- 1 salón\r\n- Hasta 5 empleados\r\n- Hasta 500 turnos/mes\r\n- Checkout público básico\r\n- Reportes básicos\r\n- Soporte por email\r\n\r\n#### Plan Pro - $79/mes\r\n- Hasta 3 salones\r\n- Empleados ilimitados\r\n- Turnos ilimitados\r\n- Checkout público avanzado\r\n- Analytics y reportes avanzados\r\n- Payment links personalizados\r\n- Integración con Mercado Pago\r\n- Soporte prioritario\r\n\r\n#### Plan Enterprise - $199/mes\r\n- Salones ilimitados\r\n- Todo del Plan Pro\r\n- API personalizada\r\n- White-label (quitar marca Coreboard)\r\n- Integraciones personalizadas\r\n- Soporte dedicado\r\n- SLA garantizado\r\n\r\n**Implementación:**\r\n- Nueva tabla `app.subscriptions` con campos: `plan_type`, `status`, `billing_cycle`, `current_period_start`, `current_period_end`\r\n- Middleware para verificar límites por plan\r\n- UI para gestión de suscripción en Settings\r\n\r\n---\r\n\r\n### 2. Comisión por Transacción (Transaction-Based)\r\n\r\n**Ventajas:**\r\n- Los usuarios solo pagan cuando ganan\r\n- Atractivo para negocios pequeños\r\n- Escala automáticamente con el éxito del cliente\r\n\r\n**Modelo:**\r\n- **2-3%** sobre cada pago procesado a través de Coreboard\r\n- Solo aplica a pagos con Mercado Pago (no efectivo)\r\n- Cobro automático al momento del pago\r\n- Sin comisión por pagos en efectivo\r\n\r\n**Implementación:**\r\n- Nueva tabla `app.platform_commissions` para trackear comisiones de Coreboard\r\n- Trigger en `app.payments` que calcula comisión cuando `payment_method = 'mercadopago'`\r\n- Dashboard de comisiones acumuladas\r\n- Integración con sistema de facturación automática\r\n\r\n**Ejemplo:**\r\n```\r\nTurno: $3,500 (Mercado Pago)\r\nComisión Coreboard (2%): $70\r\nNeto al salón: $3,430\r\n```\r\n\r\n---\r\n\r\n### 3. Modelo Híbrido (Suscripción + Transaccional)\r\n\r\n**Ventajas:**\r\n- Combina ingresos recurrentes con escalabilidad\r\n- Flexibilidad para diferentes tipos de negocios\r\n\r\n**Modelo:**\r\n- **Plan Starter**: $19/mes + 1.5% por transacción\r\n- **Plan Growth**: $49/mes + 0.5% por transacción\r\n- **Plan Enterprise**: $149/mes + 0% por transacción\r\n\r\n**Casos de uso:**\r\n- Starter: Salones pequeños con pocos turnos\r\n- Growth: Salones medianos con volumen moderado\r\n- Enterprise: Cadenas grandes con alto volumen\r\n\r\n---\r\n\r\n### 4. Features Premium (Freemium)\r\n\r\n**Ventajas:**\r\n- Atrae usuarios con versión gratuita\r\n- Monetiza solo features avanzadas\r\n\r\n**Modelo Gratis:**\r\n- 1 salón\r\n- Hasta 3 empleados\r\n- Hasta 100 turnos/mes\r\n- Checkout básico\r\n- Reportes básicos\r\n\r\n**Modelo Premium:**\r\n- Todo del gratis +\r\n- Salones ilimitados\r\n- Empleados ilimitados\r\n- Turnos ilimitados\r\n- Analytics avanzados\r\n- Payment links personalizados\r\n- Integración Mercado Pago\r\n- Exportación de datos\r\n- Soporte prioritario\r\n\r\n**Precio:** $49/mes o $490/año (2 meses gratis)\r\n\r\n---\r\n\r\n## Recomendación: Modelo Híbrido (Opción 3)\r\n\r\n### Justificación\r\n\r\n1. **Flexibilidad**: Permite que diferentes tipos de negocios elijan según su modelo\r\n2. **Escalabilidad**: Los ingresos crecen con el éxito de los clientes\r\n3. **Competitividad**: Precios accesibles para empezar, pero escalables\r\n4. **Predictibilidad**: Ingresos base mensuales garantizados\r\n\r\n### Implementación Técnica\r\n\r\n#### 1. Esquema de Base de Datos\r\n\r\n```sql\r\n-- Tabla de suscripciones\r\nCREATE TABLE app.subscriptions (\r\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  org_id uuid NOT NULL REFERENCES app.organizations(id) ON DELETE CASCADE,\r\n  plan_type text NOT NULL CHECK (plan_type IN ('starter', 'growth', 'enterprise')),\r\n  status text NOT NULL DEFAULT 'active' CHECK (status IN ('active', 'canceled', 'past_due', 'trialing')),\r\n  billing_cycle text NOT NULL CHECK (billing_cycle IN ('monthly', 'yearly')),\r\n  current_period_start timestamptz NOT NULL,\r\n  current_period_end timestamptz NOT NULL,\r\n  cancel_at_period_end boolean DEFAULT false,\r\n  created_at timestamptz DEFAULT now(),\r\n  updated_at timestamptz DEFAULT now(),\r\n  UNIQUE(org_id)\r\n);\r\n\r\n-- Tabla de comisiones de plataforma\r\nCREATE TABLE app.platform_commissions (\r\n  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),\r\n  org_id uuid NOT NULL REFERENCES app.organizations(id) ON DELETE CASCADE,\r\n  payment_id uuid REFERENCES app.payments(id) ON DELETE SET NULL,\r\n  amount numeric NOT NULL,\r\n  commission_rate numeric NOT NULL, -- % cobrado\r\n  status text NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'collected', 'refunded')),\r\n  collected_at timestamptz,\r\n  created_at timestamptz DEFAULT now()\r\n);\r\n\r\n-- Tabla de límites por plan\r\nCREATE TABLE app.plan_limits (\r\n  plan_type text PRIMARY KEY,\r\n  max_salons integer,\r\n  max_employees integer,\r\n  max_appointments_per_month integer,\r\n  transaction_fee_rate numeric, -- % de comisión por transacción\r\n  monthly_price numeric NOT NULL,\r\n  yearly_price numeric, -- NULL si no disponible\r\n  features jsonb DEFAULT '{}'::jsonb\r\n);\r\n\r\n-- Datos iniciales de planes\r\nINSERT INTO app.plan_limits (plan_type, max_salons, max_employees, max_appointments_per_month, transaction_fee_rate, monthly_price, yearly_price, features) VALUES\r\n  ('starter', 1, 10, 500, 0.015, 19.00, 190.00, '{\"checkout_public\": true, \"mercado_pago\": true, \"basic_reports\": true}'),\r\n  ('growth', 5, 50, 2000, 0.005, 49.00, 490.00, '{\"checkout_public\": true, \"mercado_pago\": true, \"advanced_reports\": true, \"custom_payment_links\": true, \"analytics\": true}'),\r\n  ('enterprise', NULL, NULL, NULL, 0.000, 149.00, 1490.00, '{\"checkout_public\": true, \"mercado_pago\": true, \"advanced_reports\": true, \"custom_payment_links\": true, \"analytics\": true, \"api_access\": true, \"white_label\": true, \"dedicated_support\": true}');\r\n```\r\n\r\n#### 2. Triggers para Comisiones de Plataforma\r\n\r\n```sql\r\n-- Función para calcular comisión de Coreboard\r\nCREATE OR REPLACE FUNCTION app.calculate_platform_commission()\r\nRETURNS TRIGGER AS $$\r\nDECLARE\r\n  v_subscription app.subscriptions;\r\n  v_plan_limit app.plan_limits;\r\n  v_commission_amount numeric;\r\nBEGIN\r\n  -- Solo aplicar a pagos de Mercado Pago\r\n  IF NEW.payment_method != 'mercadopago' THEN\r\n    RETURN NEW;\r\n  END IF;\r\n\r\n  -- Obtener suscripción activa\r\n  SELECT * INTO v_subscription\r\n  FROM app.subscriptions\r\n  WHERE org_id = NEW.org_id\r\n    AND status = 'active'\r\n    AND current_period_end > now();\r\n\r\n  -- Si no hay suscripción activa, usar plan por defecto (starter)\r\n  IF v_subscription IS NULL THEN\r\n    v_subscription.plan_type := 'starter';\r\n  END IF;\r\n\r\n  -- Obtener límites del plan\r\n  SELECT * INTO v_plan_limit\r\n  FROM app.plan_limits\r\n  WHERE plan_type = v_subscription.plan_type;\r\n\r\n  -- Calcular comisión\r\n  v_commission_amount := NEW.amount * v_plan_limit.transaction_fee_rate;\r\n\r\n  -- Insertar comisión de plataforma\r\n  INSERT INTO app.platform_commissions (\r\n    org_id,\r\n    payment_id,\r\n    amount,\r\n    commission_rate,\r\n    status\r\n  ) VALUES (\r\n    NEW.org_id,\r\n    NEW.id,\r\n    v_commission_amount,\r\n    v_plan_limit.transaction_fee_rate,\r\n    'pending'\r\n  );\r\n\r\n  RETURN NEW;\r\nEND;\r\n$$ LANGUAGE plpgsql;\r\n\r\n-- Trigger para calcular comisión automáticamente\r\nCREATE TRIGGER calculate_platform_commission_trigger\r\n  AFTER INSERT ON app.payments\r\n  FOR EACH ROW\r\n  EXECUTE FUNCTION app.calculate_platform_commission();\r\n```\r\n\r\n#### 3. Validación de Límites por Plan\r\n\r\n```sql\r\n-- Función para verificar límites\r\nCREATE OR REPLACE FUNCTION app.check_plan_limits(\r\n  p_org_id uuid,\r\n  p_check_type text, -- 'salon', 'employee', 'appointment'\r\n  p_count integer DEFAULT 1\r\n)\r\nRETURNS boolean AS $$\r\nDECLARE\r\n  v_subscription app.subscriptions;\r\n  v_plan_limit app.plan_limits;\r\n  v_current_count integer;\r\nBEGIN\r\n  -- Obtener suscripción activa\r\n  SELECT * INTO v_subscription\r\n  FROM app.subscriptions\r\n  WHERE org_id = p_org_id\r\n    AND status = 'active'\r\n    AND current_period_end > now();\r\n\r\n  -- Si no hay suscripción, usar plan starter\r\n  IF v_subscription IS NULL THEN\r\n    v_subscription.plan_type := 'starter';\r\n  END IF;\r\n\r\n  -- Obtener límites\r\n  SELECT * INTO v_plan_limit\r\n  FROM app.plan_limits\r\n  WHERE plan_type = v_subscription.plan_type;\r\n\r\n  -- Verificar según tipo\r\n  CASE p_check_type\r\n    WHEN 'salon' THEN\r\n      IF v_plan_limit.max_salons IS NOT NULL THEN\r\n        SELECT COUNT(*) INTO v_current_count\r\n        FROM app.salons\r\n        WHERE org_id = p_org_id AND deleted_at IS NULL;\r\n        \r\n        RETURN (v_current_count + p_count) <= v_plan_limit.max_salons;\r\n      END IF;\r\n      RETURN true; -- Enterprise: sin límite\r\n\r\n    WHEN 'employee' THEN\r\n      IF v_plan_limit.max_employees IS NOT NULL THEN\r\n        SELECT COUNT(*) INTO v_current_count\r\n        FROM app.employees\r\n        WHERE org_id = p_org_id AND deleted_at IS NULL;\r\n        \r\n        RETURN (v_current_count + p_count) <= v_plan_limit.max_employees;\r\n      END IF;\r\n      RETURN true;\r\n\r\n    WHEN 'appointment' THEN\r\n      IF v_plan_limit.max_appointments_per_month IS NOT NULL THEN\r\n        SELECT COUNT(*) INTO v_current_count\r\n        FROM app.appointments\r\n        WHERE org_id = p_org_id\r\n          AND created_at >= date_trunc('month', now())\r\n          AND created_at < date_trunc('month', now()) + interval '1 month';\r\n        \r\n        RETURN (v_current_count + p_count) <= v_plan_limit.max_appointments_per_month;\r\n      END IF;\r\n      RETURN true;\r\n\r\n    ELSE\r\n      RETURN false;\r\n  END CASE;\r\nEND;\r\n$$ LANGUAGE plpgsql SECURITY DEFINER;\r\n```\r\n\r\n#### 4. Componentes Frontend Necesarios\r\n\r\n**Nuevos componentes:**\r\n- `SubscriptionBilling.tsx` - Gestión de suscripción\r\n- `PlanSelector.tsx` - Selector de planes\r\n- `UsageLimits.tsx` - Mostrar uso actual vs límites\r\n- `PlatformCommissions.tsx` - Dashboard de comisiones acumuladas\r\n- `UpgradePrompt.tsx` - Prompts cuando se alcanzan límites\r\n\r\n**Hooks:**\r\n- `useSubscription.ts` - Gestión de suscripción\r\n- `usePlanLimits.ts` - Verificación de límites\r\n- `usePlatformCommissions.ts` - Comisiones de plataforma\r\n\r\n#### 5. Integración con Pasarela de Pago\r\n\r\n**Opciones:**\r\n1. **Mercado Pago** (ya integrado) - Para suscripciones recurrentes\r\n2. **Stripe** - Alternativa internacional\r\n3. **Facturación manual** - Para clientes Enterprise\r\n\r\n**Flujo de suscripción:**\r\n1. Usuario elige plan en Settings\r\n2. Se genera preferencia de pago en Mercado Pago\r\n3. Usuario completa pago\r\n4. Webhook actualiza estado de suscripción\r\n5. Usuario accede a features según plan\r\n\r\n---\r\n\r\n## Métricas de Éxito\r\n\r\n### KPIs a Monitorear\r\n\r\n1. **MRR (Monthly Recurring Revenue)**\r\n   - Suma de todas las suscripciones mensuales activas\r\n\r\n2. **ARR (Annual Recurring Revenue)**\r\n   - MRR × 12 + suscripciones anuales\r\n\r\n3. **Churn Rate**\r\n   - % de clientes que cancelan por mes\r\n\r\n4. **LTV (Lifetime Value)**\r\n   - Ingresos totales esperados de un cliente\r\n\r\n5. **CAC (Customer Acquisition Cost)**\r\n   - Costo de adquirir un nuevo cliente\r\n\r\n6. **Transaction Volume**\r\n   - Volumen total procesado (para calcular comisiones)\r\n\r\n7. **Average Revenue Per User (ARPU)**\r\n   - Ingresos totales / número de clientes activos\r\n\r\n---\r\n\r\n## Plan de Implementación\r\n\r\n### Fase 1: MVP de Monetización (2-3 semanas)\r\n- [ ] Crear tablas de suscripciones y comisiones\r\n- [ ] Implementar triggers de comisiones\r\n- [ ] Crear UI básica de selección de planes\r\n- [ ] Integrar con Mercado Pago para suscripciones\r\n- [ ] Implementar validación de límites básicos\r\n\r\n### Fase 2: Features Completas (3-4 semanas)\r\n- [ ] Dashboard de comisiones\r\n- [ ] Gestión completa de suscripción (cambiar plan, cancelar)\r\n- [ ] Notificaciones de límites\r\n- [ ] Reportes de ingresos\r\n- [ ] Testing completo\r\n\r\n### Fase 3: Optimización (2 semanas)\r\n- [ ] A/B testing de precios\r\n- [ ] Optimización de conversión\r\n- [ ] Mejoras de UX\r\n- [ ] Documentación\r\n\r\n---\r\n\r\n## Consideraciones Adicionales\r\n\r\n### Período de Prueba\r\n- Ofrecer 14 días gratis en todos los planes\r\n- Sin requerir tarjeta de crédito\r\n- Cancelación automática si no se actualiza\r\n\r\n### Migración de Usuarios Existentes\r\n- Ofrecer 3 meses gratis a usuarios actuales\r\n- Gran plan (Growth) para usuarios existentes\r\n- Comunicación clara de cambios\r\n\r\n### Soporte y Onboarding\r\n- Guías de migración\r\n- Soporte dedicado durante transición\r\n- Tutoriales de uso de features premium\r\n\r\n---\r\n\r\n## Conclusión\r\n\r\nEl **modelo híbrido** ofrece el mejor equilibrio entre:\r\n- Ingresos predecibles (suscripciones)\r\n- Escalabilidad (comisiones por transacción)\r\n- Flexibilidad (múltiples planes)\r\n- Competitividad (precios accesibles)\r\n\r\n**ROI Estimado:**\r\n- Si 100 clientes eligen Plan Starter: $1,900/mes base + comisiones\r\n- Si 50 clientes eligen Plan Growth: $2,450/mes base + comisiones\r\n- Si 10 clientes eligen Plan Enterprise: $1,490/mes base\r\n\r\n**Total estimado inicial:** ~$5,840/mes base + comisiones por transacciones\r\n\r\n",
  "sections": []
}